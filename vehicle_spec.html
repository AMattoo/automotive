<!DOCTYPE html>
<html>
  <head>
    <title>Vehicle Information API</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common'
            class='remove'></script>
    <script class="remove">
      var respecConfig = {
          specStatus:           "unofficial",
          shortName:            "vehicle-information-api",
          publishDate:          "",
          previousPublishDate:  "",
          previousMaturity:     "",
          edDraftURI:           "",
          // lcEnd:                "",
          crEnd:                "",
          editors:  [
              { name: "Kevron Rees", company: "Intel",
                      companyURL: "http://www.intel.com" },
              { name: "Justin Park", company: "LGE",
                      companyURL: "http://www.lg.com"}
         ],
          inlineCSS:    true,
          noIDLIn:      true,
          extraCSS:     ["http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css"],
          wg:           "",
          wgURI:        "http://",
          wgPublicList: "",
          wgPatentURI:  "",
      };
    </script> 
  </head>

  <body>

<!------------------------------ Abstract ------------------------------------>    
<section id="abstract">
  This specification defines a Vehicle Information API which offers a simple interface
  to get access to vehicle data. A typical use case of the Vehicle Information is the
  implementation of a tachometer application that allows view information from the
  vehicle such as speed, tire pressure, and engine rotation speed (RPMs).
</section>

<!----------------------- Status of this document ---------------------------->    
<section id="sotd">
</section>
    
<!----------------------------- Introduction --------------------------------->
<section class="informative">
  <h2>Introduction</h2>
  <p>
    The Vehicle Information API provides operations to get access to the vehicle data
    (henceforth "properties") available from vehicle systems and also to change (write) a number of
    properties.  The API also allows users to request data that has been logged previously.
  <p>
    An example of use is provided below:
  
  <pre class="example highlight">
        var vehicle = navigator.vehicle;
        
        vehicle.vehicleSpeed.get().then(function(vehicleSpeed) {
          console.log("vehicle speed: " + vehicleSpeed.speed);
        },
        function(error) {
          console.log("There was an error");
        });
        
        var vehicleSpeedSub = vehicle.vehicleSpeed.subscribe(function(vehicleSpeed) {
          console.log("vehicle speed changed to: " + vehicleSpeed.speed);
          vehicle.vehicleSpeed.unsubscribe(vehicleSpeedSub);
        });
        
        var zone = new Zone;
        
        var zones = vehicle.climateControl.zones;
        
        for(var i in zones)
        {
           if(i.equals(zone.driver))
           {
              var value = {};
              value["acStatus"] = true;
              vehicle.climateControl.set(value, zone.driver).then(function(){
                console.log("successfully set acStatus");
             },
             function(error) {
               console.log("there was an error");
             });
           }        
        }        
  </pre>
</section>
    
<!---------------------------- Conformance ----------------------------------->
<section id="conformance">
  <p>This specification defines conformance criteria that apply to a single
  product: the <dfn>user agent</dfn> that implements the interfaces that it
  contains.
  
  <p>Implementations that use ECMAScript to implement the APIs defined in this
  specification MUST implement them in a manner consistent with the ECMAScript
  Bindings defined in the Web IDL specification [[!WEBIDL]], as this
  specification uses that specification and terminology.
</section>
    
<!----------------------------- Terminology ---------------------------------->
<section>
  <h2>Terminology</h2> <p>The <code><a
  href="http://dev.w3.org/html5/spec/webappapis.html#eventhandler">
  EventHandler</a></code> interface represents a callback used for event
  handlers as defined in [[!HTML5]].
  
  <p>The concepts <dfn><a
  href="http://dev.w3.org/html5/spec/webappapis.html#queue-a-task"> queue a
  task</a></dfn> and <dfn><a
  href="http://dev.w3.org/html5/spec/webappapis.html#fire-a-simple-event">
  fire a simple event</a></dfn> are defined in [[!HTML5]].
  
  <p>The terms <a
  href="http://dev.w3.org/html5/spec/webappapis.html#event-handlers"><dfn
  id="dfn-eventhandler">event handler</dfn></a> and <a
  href="http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type">
  <dfn id="dfn-eventtypes"> event handler event types</dfn></a> are defined in
  [[!HTML5]]. 
</section>

<!------------------------ Security and privacy ------------------------------>
<section>
      <h2>Security and privacy considerations</h2>
      <p>This API must be only exposed to trusted content</p>
</section>

<!---------------------- Extended interface Navigator ------------------------>
<section>
  <h2><a>Navigator</a> Interface</h2>
    <dl title="partial interface Navigator" class="idl">
      <dt>readonly attribute Vehicle vehicle</dt>
      <dd>
      The object that exposes the interface to vehicle information services.
      </dd>
  </dl>
</section>
    
<!------------------------ Interface Vehicle ------------------------------->
<section>
  <h2><a>Vehicle Information</a> Interface</h2> <p>The <a>Vehicle Information</a> interface
  represents the initial entry point for getting access to the vehicle information
  services, i.e. Engine Speed and Tire Pressure. </p>
  
  <dl title="[NoInterfaceObject] interface Vehicle" class="idl">  
    <dt>readonly attribute VehicleInterface vehicleSpeed</dt>
    <dd>Must return VehicleInterface for vehicleSpeed or undefined if not supported</dd>
    <dt>readonly attribute VehicleInterface climateControl</dt>
    <dd>Must return VehicleInterface for climateControl or undefined if not supported</dd>
  </dl>
   

</section>

<!------------------------ Interface Zone ------------------------>
<section>
  <h2><a>Zone</a> Interface</h2> <p>The <a>Zone</a>
  interface contains the constants that represent physical zones and logical zones</p>
  
  <dl title="[NoInterfaceObject] interface Zone"
  class="idl">
    <dt>const DOMString Front = "Front"</dt>
    <dt>const DOMString Middle = "Middle"</dt>
    <dt>const DOMString Right = "Right"</dt>
    <dt>const DOMString Left = "Left"</dt>
    <dt>const DOMString Rear = "Rear"</dt>
    <dt>const DOMString Center = "Center"</dt>

    <dt>attribute unsigned DOMString value[]</dt<dd>Must return array of physical zones</dd>
    <dt>readonly attribute Zone driver</dt><dd>Must return physical zone array for logical driver</dd>
    <dt>readonly attribute Zone passenger[]</dt><dd>Must return physical zone array for logical passenger</dd>
    
    <dt>boolean equals(Zone zone)</dt><dd>Must return true if zone.value matches the contents of this.value.  
    Ordering of elements within Zone.value does not matter.</dd>
    
    <dt>boolean contains(Zone zone)</dt><dd>Must return true if zone.value can be found within this.value</dd>
    
  </dl>
</section>

<!------------------------ Callback VehicleInterfaceCallback------------------------------>
<section>
  <h2><a>VehicleInterfaceCallback</a> Callback</h2>
  <p>The <a>VehicleInterfaceCallback</a> </p>
  <dl title="callback VehicleInterfaceCallback = void (object value)"></dl>
</section> 

<!------------------------ Callback VehicleInterfaceErrorCallback------------------------------>
<section>
  <h2><a>VehicleInterfaceErrorCallback</a> Callback</h2>
  <p>The <a>VehicleInterfaceErrorCallback</a> </p>
  <dl title="callback VehicleInterfaceErrorCallback = void (VehicleInterfaceError error); "></dl>
</section> 

<!------------------------ Interface VehicleInterface ------------------------>
<section>
  <h2><a>VehicleInterface</a> Interface</h2> <p>The <a>VehicleInterface</a>
  interface represents the base interface to get and set all vehicle properties.</p>
  
  <dl title="[NoInterfaceObject] interface VehicleInterface"
  class="idl">

    <dt>Promise get(optional Zone zone)</dt> <dd>MUST return the Promise.</dd>
    <dt>Promise set(object value, optional Zone zone)</dt><dd>MUST return Promise</dd>
    <dt>readonly attribute Zone zones[]</dt><dd>must return available zones</dd>
    <dt>unsigned short subscribe(VehicleInterfaceCallback callback, optional Zone zone)</dt><dd>must return handle to subscription or 0 if error</dd>
    <dt>void unsubscribe(short handle)</dt><dd>must return void.  unsubscribes to value changes on this interface.</dd>
  </dl>
</section>

<!------------------------ Interface VehicleCommonDataType ------------------------>
<section>
  <h2><a>VehicleCommonDataType</a> Interface</h2> <p>The <a>VehicleCommonDataType</a>
  interface represents the common data type for all vehicle data types</p>
  
  <dl title="[NoInterfaceObject] interface VehicleCommonDataType"
  class="idl">
    <dt>readonly attribute Zone zone</dt><dd>must return zone for this data type or null if there is no zone associated with this data type</dd>
    <dt>readonly attribute DOMTimeStamp timeStamp</dt><dd>must return timestamp when this data was received on the system</dd>
  </dl>
</section>

<!------------------------ Interface VehicleSpeedType ------------------------>
<section>
  <h2><a>VehicleSpeedType</a> Interface</h2> <p>The <a>VehicleSpeedType</a>
  represents vehicle speed interface</p>
  
  <dl title="[NoInterfaceObject] interface VehicleSpeedType : VehicleCommonDataType"
  class="idl">
    <dt>readonly attribute unsigned short speed</dt><dd>must return vehicle speed in k/h</dd>
  </dl>
</section>

<!------------------------ Interface ClimateControlType ------------------------>
<section>
  <h2><a>ClimateControlType</a> Interface</h2> <p>The <a>ClimateControlType</a>
  represents the climate control interface</p>
  
  <dl title="[NoInterfaceObject] interface ClimateControlType : VehicleCommonDataType"
  class="idl">
    <dt>readonly attribute boolean acStatus</dt><dd>must return air conditioning status, on=true, off=false or undefined if not supported</dd>
  </dl>
</section>

  </body>
</html>
